<view class="navbar shadow">
  <scroll-view scroll-x enhanced show-scrollbar="false" style="height: 100%;white-space: nowrap;" scroll-into-view="nav-{{nav_to_view}}">
    <view wx:for="{{navItems}}" id='nav-{{index + startIndex}}' wx:for-item="name" wx:key="unique" data-index="{{index + startIndex}}" class="item {{currentTab==(index + startIndex) ? 'active-class active' : ''}}" style="{{index + startIndex < -1 ? 'width:80rpx;' : ''}}" bindtap="navbarTapPre">
      <text>{{prop ? name[prop] : name}}</text>
    </view>
  </scroll-view>
</view>

<view class="write-button-outer" bind:tap="handleStarTap">
  <view class="write-button-inner">
    <image class="write-button" src="{{postButtonIcon?postButtonIcon:'/images/send-post.svg'}}"
    style="{{postButtonIcon?'width: 150rpx;height: 150rpx;':''}}"></image>
  </view>
</view>

<swiper class="scroll-outer" current="{{swiper_current}}" bindchange="swiperChange" wx:if="{{allowHomeSwipe}}">
  <swiper-item wx:for="{{navItems}}">
    <scroll-view scroll-y="{{true}}" class="scroll-outer" scroll-top="{{scroll_top}}" enable-back-to-top="{{true}}" refresher-enabled="{{true}}" refresher-threshold="{{30}}" refresher-default-style="{{scrollViewRefresherStyle}}" refresher-triggered="{{refresh_triggered}}" bindrefresherrefresh="onRefresh" bindrefresherrestore="onRestore" bindscrolltolower="onLoadMore" bindscroll="bindScroll" wx:if="{{index == currentTab - startIndex}}">

      <view class="post-content" style="margin-top:5vw">
        <one type="banner" data="{{banner_list}}" wx:if="{{banner_list[0]}}"/>
        <one type="calendar_now" data="{{calendar_now_data}}" wx:if="{{calendar_now_data.calendar_now_list[0]&&currentTab == -1}}"/>
        <one type="{{item.post_media.media_type == 'article'?'article':'post'}}" data="{{item}}" wx:for="{{postList}}"/>
        <loadmore end="{{isLast}}" loading="{{is_loading_more}}" />
      </view>

    </scroll-view>
  </swiper-item>
</swiper>
<scroll-view scroll-y="{{true}}" class="scroll-outer" scroll-top="{{scroll_top}}" enable-back-to-top="{{true}}" refresher-enabled="{{true}}" refresher-threshold="{{30}}" refresher-default-style="{{scrollViewRefresherStyle}}" refresher-triggered="{{refresh_triggered}}" bindrefresherrefresh="onRefresh" bindrefresherrestore="onRestore" bindscrolltolower="onLoadMore" bindscroll="bindScroll" wx:else>


  <view class="post-content">
    <one type="banner" data="{{banner_list}}" wx:if="{{banner_list[0]}}"/>
    <one type="calendar_now" data="{{calendar_now_data}}" wx:if="{{calendar_now_data.calendar_now_list[0]&&currentTab == -1}}"/>
    <one type="{{item.post_media.media_type == 'article'?'article':'post'}}" data="{{item}}" wx:for="{{postList}}"/>
    <loadmore end="{{isLast}}" loading="{{is_loading_more}}" />
  </view>


</scroll-view>





<!-- <view wx:if="{{is_error}}">
  <view style="font-size: 50rpx;font-weight: bold;text-align: center;margin-top: 100rpx;margin-bottom: 50rpx;">{{errorInfo.error_title}}</view>
  <view style="font-size: 34rpx;margin-left: 30rpx;margin-right: 30rpx;">{{errorInfo.error_content}}</view>
</view> -->


<view class="ad1" wx:if="{{show_ad}}" bindtap="closeAD">
        <view class="ad2">
            <image mode="aspectFit" style="width:90%;" catchtap="onTapAd" src='{{adInfo.ad_image}}'/>
        </view>
          <view class="back_w">
           <cover-view class="back_image" catchtap="closeAD">
             <cover-image  src="/images/cross-circle.svg"></cover-image>
            </cover-view>
          </view>
</view>