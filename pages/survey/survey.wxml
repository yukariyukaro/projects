<!--pages/survey/survey.wxml-->
<view class="message" wx:if="{{loading}}"></view>
<view class="message" wx:elif="{{error}}">
  <view class="field">
    问卷内容获取失败
  </view>
  <view class="field">
    {{error}}
  </view>
  <button class="gray" bind:tap="getForm">重新加载</button>
</view>
<form wx:else class="form" catchsubmit="formSubmit">
  <view class="title">{{form.title}}</view>
  <view class="field {{ !field.optional ? 'field-required' : ''}}" wx:for="{{form.fields}}" wx:for-item="field" wx:key="index">
    <block wx:if="{{field.type === 'radio'}}">
      <view class="field-title">{{index + 1}}. {{field.label}} （单选题）</view>
      <view class="group">
        <radio-group name="{{index}}">
          <label class="group-row" wx:for="{{field.options}}" wx:for-item="option" wx:key="*this">
            <radio value="{{option}}" color="{{primaryColor}}"></radio>
            <text>{{option}}</text>
          </label>
        </radio-group>
      </view>
    </block>
    <block wx:elif="{{field.type === 'checkbox'}}">
      <view class="field-title">{{index + 1}}. {{field.label}} （多选题）</view>
      <view class="group">
        <checkbox-group name="{{index}}">
          <label class="group-row" wx:for="{{field.options}}" wx:for-item="option" wx:key="*this">
            <checkbox value="{{option}}" color="{{secondaryColor}}"></checkbox>
            <text>{{option}}</text>
          </label>
        </checkbox-group>
      </view>
    </block>
    <block wx:elif="{{field.type === 'input'}}">
      <view class="field-title">{{index + 1}}. {{field.label}} （填空题）</view>
      <input name="{{index}}"></input>
    </block>
    <block wx:elif="{{field.type === 'sort'}}">
      <view class="field-title">{{index + 1}}. {{field.label}} （排序题）</view>
      <sort name="{{index}}" options="{{field.options}}"></sort>
    </block>
  </view>
  <!-- <view class="field">
    <button class="gray" formType="reset">清空</button>
  </view> -->
  <view class="field">
    <button class="secondary" formType="submit">提交</button>
  </view>
  <view class="footer">{{form.footer}}</view>
</form>